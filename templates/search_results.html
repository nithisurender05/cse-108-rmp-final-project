{% extends 'base.html' %}

{% block content %}
<h2>Search results for "{{ query }}"</h2>

{% if professors %}
<h4 class="mt-3">Professors</h4>
<ul class="list-group mb-3">
    {% for p in professors %}
    <li class="list-group-item">
        <a href="{{ url_for('professor_detail', id=p.id) }}">{{ p.name }}</a>
        {% if p.department %}<small class="text-muted"> â€” {{ p.department }}{% if p.university %}, {{ p.university }}{% endif %}</small>{% endif %}
    </li>
    {% endfor %}
</ul>
{% endif %}

{% if courses %}
<h4 class="mt-3">Classes</h4>
    {% for c in courses %}
    <div class="card mb-2">
        <div class="card-body">
            <strong>{{ c.course_code }}</strong>
            <ul class="mb-0 mt-2">
                {% for prof in c.professors %}
                <li><a href="{{ url_for('professor_detail', id=prof.id) }}?course={{ c.course_code|urlencode }}">{{ prof.name }}</a></li>
                {% endfor %}
            </ul>
        </div>
    </div>
    {% endfor %}
{% endif %}

<!-- Added this new section for Course Results -->
{% if course_results %}
<h4 class="mt-3">Courses</h4>
<ul class="list-group mb-3">
    {% for course in course_results %}
    <li class="list-group-item">
        <a href="{{ url_for('course_detail', course_code=course.code) }}">
            {{ course.code }}
            {% if course.title %} - {{ course.title }}{% endif %}
        </a>
        {% if course.avg_rating %}
        <small class="text-muted float-end">Rating: {{ course.avg_rating }}/5</small>
        {% endif %}
    </li>
    {% endfor %}
</ul>
{% endif %}

{% if not professors and not courses and not course_results %}
    <div class="alert alert-info">No results found for "{{ query }}".</div>
{% endif %}

{% endblock %}