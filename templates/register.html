{% extends "base.html" %}
{% block content %}
<div class="col-md-6 offset-md-3">
    <h2>Register</h2>
    <form method="POST">
        <div class="mb-3">
            <label>Account Type</label>
            <div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="role" id="roleStudent" value="student" checked>
                    <label class="form-check-label" for="roleStudent">Student</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="role" id="roleProfessor" value="professor">
                    <label class="form-check-label" for="roleProfessor">Professor</label>
                </div>
            </div>
        </div>
        <div class="mb-3">
            <label>Username</label>
            <input type="text" name="username" class="form-control" required>
        </div>
        <div class="mb-3">
            <label>Email</label>
            <input type="email" name="email" id="email" class="form-control" required>
        </div>
        <div class="mb-3">
            <label>Password</label>
            <input type="password" name="password" class="form-control" required>
        </div>
        <!-- Professor profile fields -->
        <div id="profFields" style="display:none;">
            <hr>
            <h4>Professor Profile</h4>
            <div class="mb-3">
                <label>Name (how you'd like it displayed)</label>
                <input type="text" name="prof_name" id="prof_name" class="form-control">
            </div>
            <div class="mb-3">
                <label>Department</label>
                <select name="department" id="departmentSelect" class="form-select">
                    <option value="">-- Select Department --</option>
                    <option value="Computer Science">Computer Science</option>
                    <option value="Mathematics">Mathematics</option>
                    <option value="Physics">Physics</option>
                    <option value="Chemistry">Chemistry</option>
                    <option value="Biology">Biology</option>
                    <option value="History">History</option>
                    <option value="English">English</option>
                    <option value="Economics">Economics</option>
                    <option value="Engineering">Engineering</option>
                    <option value="Other">Other</option>
                </select>
                <input type="text" name="other_department" id="otherDepartment" class="form-control mt-2" placeholder="Add your department" style="display:none;">
            </div>
            <div class="mb-3">
                <label>University</label>
                <input type="text" name="university" id="university" class="form-control">
            </div>
        </div>
        
        <button type="submit" class="btn btn-success">Sign Up</button>
    </form>
</div>
<script>
    // Show/hide professor fields based on role
    const roleStudent = document.getElementById('roleStudent');
    const roleProfessor = document.getElementById('roleProfessor');
    const profFields = document.getElementById('profFields');
    const profName = document.getElementById('prof_name');
    
    function updateProfFields() {
        if (roleProfessor.checked) {
            profFields.style.display = 'block';
            profName.required = true;
        } else {
            profFields.style.display = 'none';
            profName.required = false;
        }
    }
    roleStudent.addEventListener('change', updateProfFields);
    roleProfessor.addEventListener('change', updateProfFields);
    updateProfFields();

    // Show/hide "Other department" input
    const departmentSelect = document.getElementById('departmentSelect');
    const otherDepartment = document.getElementById('otherDepartment');
    function updateOtherDepartment() {
        if (departmentSelect && otherDepartment) {
            if (departmentSelect.value === 'Other') {
                otherDepartment.style.display = 'block';
                otherDepartment.required = true;
            } else {
                otherDepartment.style.display = 'none';
                otherDepartment.required = false;
            }
        }
    }
    if (departmentSelect) {
        departmentSelect.addEventListener('change', updateOtherDepartment);
        updateOtherDepartment();
    }
</script>
{% endblock %}